% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/library.R
\name{Library}
\alias{Library}
\title{SAS Library Interface}
\description{
The \code{Library} class provides a high-level R interface to SAS libraries in SLC.
It allows you to list datasets, open existing datasets, create new datasets,
and convert between R data frames and SAS datasets.
}
\details{
A Library object represents a SAS library (libref) and provides methods to:
\itemize{
\item List all datasets in the library
\item Open existing datasets for reading
\item Create new empty datasets
\item Import R data frames as SAS datasets
\item Export SAS datasets as R data frames
}

The library uses PROC IMPORT and PROC EXPORT internally for data frame
conversions, supporting CSV and Parquet formats.
}
\examples{
\dontrun{
# Connect to SLC and get the WORK library
slc <- Slc$new()
work_lib <- slc$get_library("WORK")

# List all datasets in the library
datasets <- work_lib$get_dataset_names()

# Create a dataset from an R data frame
work_lib$create_dataset_from_dataframe(mtcars, "cars_data")

# Get a dataset back as an R data frame
cars_df <- work_lib$get_dataset_as_dataframe("cars_data")

# Open a dataset for reading
dataset <- work_lib$open_dataset("cars_data")
}


## ------------------------------------------------
## Method `Library$new`
## ------------------------------------------------

\dontrun{
# Usually created via Slc$get_library() rather than directly
work_lib <- slc$get_library("WORK")
}

## ------------------------------------------------
## Method `Library$get_name`
## ------------------------------------------------

\dontrun{
work_lib <- slc$get_library("WORK")
lib_name <- work_lib$get_name()  # Returns "WORK"
}

## ------------------------------------------------
## Method `Library$get_dataset_names`
## ------------------------------------------------

\dontrun{
work_lib <- slc$get_library("WORK")
datasets <- work_lib$get_dataset_names()
print(datasets)  # e.g., c("DATASET1", "DATASET2", "MYTABLE")
}

## ------------------------------------------------
## Method `Library$open_dataset`
## ------------------------------------------------

\dontrun{
work_lib <- slc$get_library("WORK")
dataset <- work_lib$open_dataset("MYTABLE")

# Get dataset dimensions
nrows <- dataset$get_nobs()
ncols <- dataset$get_nvars()
}

## ------------------------------------------------
## Method `Library$create_dataset`
## ------------------------------------------------

\dontrun{
work_lib <- slc$get_library("WORK")
new_dataset <- work_lib$create_dataset("NEWTABLE")
}

## ------------------------------------------------
## Method `Library$create_dataset_from_dataframe`
## ------------------------------------------------

\dontrun{
work_lib <- slc$get_library("WORK")

# Import mtcars as CSV (default)
work_lib$create_dataset_from_dataframe(mtcars, "cars_csv")

# Import iris as Parquet
work_lib$create_dataset_from_dataframe(iris, "iris_data", format = "parquet")

# Name defaults to variable name if not specified
my_data <- data.frame(x = 1:5, y = letters[1:5])
work_lib$create_dataset_from_dataframe(my_data)  # Creates dataset "my_data"
}

## ------------------------------------------------
## Method `Library$get_dataset_as_dataframe`
## ------------------------------------------------

\dontrun{
work_lib <- slc$get_library("WORK")

# First create a dataset in SAS
slc$submit("
  data work.example;
    do i = 1 to 10;
      x = i * 2;
      y = ranuni(123);
      output;
    end;
  run;
")

# Export to R data frame
df <- work_lib$get_dataset_as_dataframe("example")
print(df)
}
}
\section{Methods}{
\subsection{Public methods}{
\itemize{
\item \href{#method-Library-new}{\code{Library$new()}}
\item \href{#method-Library-get_name}{\code{Library$get_name()}}
\item \href{#method-Library-get_dataset_names}{\code{Library$get_dataset_names()}}
\item \href{#method-Library-open_dataset}{\code{Library$open_dataset()}}
\item \href{#method-Library-create_dataset}{\code{Library$create_dataset()}}
\item \href{#method-Library-create_dataset_from_dataframe}{\code{Library$create_dataset_from_dataframe()}}
\item \href{#method-Library-get_dataset_as_dataframe}{\code{Library$get_dataset_as_dataframe()}}
\item \href{#method-Library-clone}{\code{Library$clone()}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Library-new"></a>}}
\if{latex}{\out{\hypertarget{method-Library-new}{}}}
\subsection{Method \code{new()}}{
Create a new Library object
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Library$new(libref, session = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{libref}}{A WpsLibref object representing the SAS library}

\item{\code{session}}{A WpsSession object (optional, but required for data frame operations)}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
A new Library object
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{\dontrun{
# Usually created via Slc$get_library() rather than directly
work_lib <- slc$get_library("WORK")
}
}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Library-get_name"></a>}}
\if{latex}{\out{\hypertarget{method-Library-get_name}{}}}
\subsection{Method \code{get_name()}}{
Get the name of the library
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Library$get_name()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
Character string containing the library name (libref)
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{\dontrun{
work_lib <- slc$get_library("WORK")
lib_name <- work_lib$get_name()  # Returns "WORK"
}
}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Library-get_dataset_names"></a>}}
\if{latex}{\out{\hypertarget{method-Library-get_dataset_names}{}}}
\subsection{Method \code{get_dataset_names()}}{
Get names of all datasets in the library
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Library$get_dataset_names()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
Character vector of dataset names
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{\dontrun{
work_lib <- slc$get_library("WORK")
datasets <- work_lib$get_dataset_names()
print(datasets)  # e.g., c("DATASET1", "DATASET2", "MYTABLE")
}
}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Library-open_dataset"></a>}}
\if{latex}{\out{\hypertarget{method-Library-open_dataset}{}}}
\subsection{Method \code{open_dataset()}}{
Open an existing dataset for reading
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Library$open_dataset(name)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{name}}{Character string specifying the dataset name}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
A Dataset object that can be used to read the dataset
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{\dontrun{
work_lib <- slc$get_library("WORK")
dataset <- work_lib$open_dataset("MYTABLE")

# Get dataset dimensions
nrows <- dataset$get_nobs()
ncols <- dataset$get_nvars()
}
}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Library-create_dataset"></a>}}
\if{latex}{\out{\hypertarget{method-Library-create_dataset}{}}}
\subsection{Method \code{create_dataset()}}{
Create a new empty dataset
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Library$create_dataset(name)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{name}}{Character string specifying the name for the new dataset}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
A Dataset object representing the new empty dataset
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{\dontrun{
work_lib <- slc$get_library("WORK")
new_dataset <- work_lib$create_dataset("NEWTABLE")
}
}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Library-create_dataset_from_dataframe"></a>}}
\if{latex}{\out{\hypertarget{method-Library-create_dataset_from_dataframe}{}}}
\subsection{Method \code{create_dataset_from_dataframe()}}{
Create a SAS dataset from an R data frame
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Library$create_dataset_from_dataframe(
  df,
  name = deparse(substitute(df)),
  format = "csv"
)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{df}}{Data frame to import into SAS}

\item{\code{name}}{Character string specifying the dataset name. If not provided,
uses the name of the data frame variable}

\item{\code{format}}{Character string specifying the intermediate file format.
Either "csv" (default) or "parquet"}
}
\if{html}{\out{</div>}}
}
\subsection{Details}{
This method works by:
\enumerate{
\item Writing the R data frame to a temporary file (CSV or Parquet)
\item Using PROC IMPORT to read the file into a SAS dataset
\item Cleaning up the temporary file
}

For Parquet format, the \code{arrow} package must be installed.
}

\subsection{Returns}{
Invisible self (for method chaining)
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{\dontrun{
work_lib <- slc$get_library("WORK")

# Import mtcars as CSV (default)
work_lib$create_dataset_from_dataframe(mtcars, "cars_csv")

# Import iris as Parquet
work_lib$create_dataset_from_dataframe(iris, "iris_data", format = "parquet")

# Name defaults to variable name if not specified
my_data <- data.frame(x = 1:5, y = letters[1:5])
work_lib$create_dataset_from_dataframe(my_data)  # Creates dataset "my_data"
}
}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Library-get_dataset_as_dataframe"></a>}}
\if{latex}{\out{\hypertarget{method-Library-get_dataset_as_dataframe}{}}}
\subsection{Method \code{get_dataset_as_dataframe()}}{
Export a SAS dataset as an R data frame
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Library$get_dataset_as_dataframe(name)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{name}}{Character string specifying the dataset name to export}
}
\if{html}{\out{</div>}}
}
\subsection{Details}{
This method works by:
\enumerate{
\item Using PROC EXPORT to write the SAS dataset to a temporary CSV file
\item Reading the CSV file into R as a data frame
\item Cleaning up the temporary file
}

All SAS data types are converted to appropriate R types. Character variables
become character vectors, numeric variables become numeric vectors, and
dates/datetimes are converted to appropriate R date/time classes.
}

\subsection{Returns}{
Data frame containing the dataset contents
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{\dontrun{
work_lib <- slc$get_library("WORK")

# First create a dataset in SAS
slc$submit("
  data work.example;
    do i = 1 to 10;
      x = i * 2;
      y = ranuni(123);
      output;
    end;
  run;
")

# Export to R data frame
df <- work_lib$get_dataset_as_dataframe("example")
print(df)
}
}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Library-clone"></a>}}
\if{latex}{\out{\hypertarget{method-Library-clone}{}}}
\subsection{Method \code{clone()}}{
The objects of this class are cloneable with this method.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Library$clone(deep = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{deep}}{Whether to make a deep clone.}
}
\if{html}{\out{</div>}}
}
}
}
